{"changed":true,"filter":false,"title":"MessageBoard.js","tooltip":"/2-labbymezzage/MessageBoard.js","value":"\"use strict\";\n/* I denna fil körs vår applikation.\n * Vi använder window.onload för att starta applikationen när\n * fönstret laddat klart. * \n */\n \n\n\nvar messageBoard = {//här ska vara en metod som kommer trigga igång de andra metoderna\n\n    messages: [],//skapar tom array\n    \n    init: function(){//privat function\n        //r main = document.querySelector('main');\n        \n        //main.addEventListener('click', function(e){ Lite tips från Andreas till meomory\n          //var klickedNode = e.target;\n        //  if(klickedNode.getAttribute('class') == 'text'){\n          //    console.log('detta var ett text-element');\n        //  }\n          //else{\n        //      console.log('det var inte en text-nod');\n          //}\n    //  });\n        \n        var submit = document.getElementById(\"send\"); //knappen\n        var text = document.querySelector(\"textarea\"); //texten\n        \n        text.addEventListener(\"keypress\", function(e){\n            \n\t\t\tif(!e){ e = window.event; }//tilldelar e = eventknappen i fönstret\n\n\t\t\tif(e.keyCode == 13 && !e.shiftKey){ //om event = enter OCH inte-shift\n\t\t\t\tmessageBoard.newObjekt(e);\n\t\t\t}\n\t\t});\n        \n        submit.addEventListener(\"click\", function(a){//när vi klickar på submit hoppar vi \n            \n            messageBoard.newObjekt(a);//till newObject funktionenegenskapen \n        });\n                     \n    },\n      \n    newObjekt: function(a){//här skapas ett nytt objekt t arrayn\n        var text = document.querySelector(\"textarea\"); //texten\n        a.preventDefault(); //formuläret skickas inte vidare.\n        \n        if( text.value !== \"\"){\n            messageBoard.messages.push(new Message(text.value, new Date())); // skickar värderna till konstruktorn\n            var lastPost = messageBoard.messages.length - 1;\n            messageBoard.outputMessage(lastPost);//skickar meddelandets id till metoden där jag skriver ut meddelanden\n            messageBoard.countMessage();//räknar meddelanden\n\n\t\t\ttext.value = \"\";\n\t\t}\n    },\n    \n    outputMessage: function(messageId){//här skrivs meddelandet ut\n        var add = document.querySelector(\"#messageTag\");//hittar message-div-taggen\n        \n        //skapa nya div taggar och får ids som ska läggas till i add sedan\n        var newMess = document.createElement(\"div\");\n        var newDelete = document.createElement(\"div\");//skapar delete - div tag\n        var newA = document.createElement(\"a\");\n        var newA2 = document.createElement(\"a\"); //delete och time kunde inte dela samma a-tag\n        var newTime = document.createElement(\"div\");\n        var newPText = document.createElement(\"p\");\n        var newPDate = document.createElement(\"p\");\n        \n        //sätter attribut till de nya taggarna\n        newMess.setAttribute(\"id\", \"newPost\")\n        newDelete.setAttribute(\"class\", \"delete\");\n        newA.setAttribute(\"href\", \"#\");\n        newA.setAttribute(\"alt\", \"Delete-knapp\");\n        newA2.setAttribute(\"alt\", \"Tid-knapp\");\n        newA2.setAttribute(\"href\", \"#\");\n        newTime.setAttribute(\"class\", \"time\");\n        newPText.setAttribute(\"class\", \"text\");\n        newPDate.setAttribute(\"class\", \"date\");\n        \n        \n        //lägger till de nya taggarna\n        add.appendChild(newMess); //lägger till ny newPost i messageTag\n        newMess.appendChild(newDelete); \n        newDelete.appendChild(newA);\n        newMess.appendChild(newTime);\n        newTime.appendChild(newA2);\n        newMess.appendChild(newPText);\n        newMess.appendChild(newPDate);\n        console.log(\"Lägger till de nya taggarna\");\n        \n        //Lägger till texten i p taggen\n        newPText.innerHTML += messageBoard.messages[messageId].getHTMLText();\n        console.log(\"texten: \"+messageBoard.messages[messageId].getHTMLText());\n        \n        //Lägger till datument i en annan p tagg\n        newPDate.innerHTML += messageBoard.messages[messageId].getDateText();\n        console.log(\"Datumet: \"+messageBoard.messages[messageId].getDateText());\n        \n        \n        //radera meddelanden\n        newA.onclick = function(e){\n\t\t\te.preventDefault();\n\t\t\tif( confirm(\"Vill du verkligen radera meddelandet?\")){\n\t\t\t\tmessageBoard.remove(messageId);\n\t\t\t}\n\t\t}\n        \n        newA2.onclick = function(e){\n\t\t\te.preventDefault();\n\t\t\talert(messageBoard.messages[messageId].toString());\n\t\t}\n    },\n    \n    countMessage: function(){//lägger till antal i existerande divtagg\n        \n        var count = messageBoard.messages.length;\n        document.querySelector(\"#count\").innerHTML = \"Antal meddelanden: \"+count;\n        console.log(\"hur många meddelanden: \"+count);\n    },\n    \n    remove: function(messageId){\n\t\tmessageBoard.messages.splice(messageId, 1); //på postionen messageId, ta bort ett item\n\t\tmessageBoard.readAllMessages(messageId);\n\t\tmessageBoard.countMessage();\n\t\t\n\t},\n\t\n\treadAllMessages: function(messageId){\n\t    \n\t\t//tar bort alla meddelande(li) i ul-taggen\n\t\tdocument.getElementById(\"messageTag\").innerHTML = \"\";\n\t\t//document.querySelectorAll(\"li\").replace(/<(?:.|\\n)*?>/gm, '')\n        console.log(\"tar bort alla meddelanden \");\n        \n\t\t//loppar igenom obektet och skriver ut dem som är kvar\n\t\tfor (var i = 0; i < messageBoard.messages.length; i++) {\n\t\t\tmessageBoard.outputMessage(i);\n\t\t};\n\t\tconsole.log(\"skriver ut meddelanden som är kvar\");\n\t\t\n\n\t},\n   \n    \n    \n};\n    //console.log(messageBoard.messages[1].getText());\nwindow.onload = messageBoard.init;\n\n\n/*var message = ['Ge inte ut ditt lösenord till någon']; //första meddelandet\nmessage.push('här är ett meddelande');\nconsole.log(\"Meddelanden i arrayn: \"+message);\nconsole.log(\"längd på arrayn: \"+message.length);\nconsole.log(\"Meddelanden nummer två: \"+message);*/","undoManager":{"mark":98,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":21,"column":32},"end":{"row":21,"column":33},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":33},"end":{"row":21,"column":34},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":34},"end":{"row":21,"column":35},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":35},"end":{"row":21,"column":36},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":36},"end":{"row":21,"column":37},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":37},"end":{"row":21,"column":38},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":38},"end":{"row":21,"column":39},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":38},"end":{"row":21,"column":39},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":37},"end":{"row":21,"column":38},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":37},"end":{"row":21,"column":38},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":38},"end":{"row":21,"column":39},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":39},"end":{"row":21,"column":40},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":40},"end":{"row":21,"column":41},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":41},"end":{"row":21,"column":42},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":42},"end":{"row":21,"column":43},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":43},"end":{"row":21,"column":44},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":44},"end":{"row":21,"column":45},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":45},"end":{"row":21,"column":46},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":46},"end":{"row":21,"column":47},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":47},"end":{"row":21,"column":48},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":48},"end":{"row":21,"column":49},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":49},"end":{"row":21,"column":50},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":46},"end":{"row":21,"column":50},"action":"remove","lines":["text"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":45},"end":{"row":21,"column":46},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":44},"end":{"row":21,"column":45},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":43},"end":{"row":21,"column":44},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":42},"end":{"row":21,"column":43},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":42},"end":{"row":21,"column":43},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":43},"end":{"row":21,"column":44},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":44},"end":{"row":21,"column":45},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":45},"end":{"row":21,"column":46},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":46},"end":{"row":21,"column":47},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":47},"end":{"row":21,"column":48},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":48},"end":{"row":21,"column":49},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":49},"end":{"row":21,"column":50},"action":"insert","lines":["-"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":50},"end":{"row":21,"column":51},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":51},"end":{"row":21,"column":52},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":52},"end":{"row":21,"column":53},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":12},"end":{"row":23,"column":13},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":13},"end":{"row":23,"column":14},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":13},"end":{"row":23,"column":39},"action":"remove","lines":["","            //console.log(klickedNode);"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":8},"end":{"row":15,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":9},"end":{"row":15,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":10},"end":{"row":16,"column":11},"action":"insert","lines":["7"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":11},"end":{"row":16,"column":12},"action":"insert","lines":["7"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":11},"end":{"row":16,"column":12},"action":"remove","lines":["7"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":10},"end":{"row":16,"column":11},"action":"remove","lines":["7"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":10},"end":{"row":16,"column":11},"action":"remove","lines":[" "]},{"start":{"row":16,"column":10},"end":{"row":16,"column":11},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":16,"column":11},"end":{"row":16,"column":12},"action":"remove","lines":[" "]},{"start":{"row":16,"column":11},"end":{"row":16,"column":12},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":8},"end":{"row":17,"column":9},"action":"remove","lines":[" "]},{"start":{"row":17,"column":8},"end":{"row":17,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":9},"end":{"row":17,"column":10},"action":"remove","lines":[" "]},{"start":{"row":17,"column":9},"end":{"row":17,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":10},"end":{"row":18,"column":11},"action":"remove","lines":[" "]},{"start":{"row":18,"column":10},"end":{"row":18,"column":11},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":18,"column":11},"end":{"row":18,"column":12},"action":"remove","lines":[" "]},{"start":{"row":18,"column":11},"end":{"row":18,"column":12},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":8},"end":{"row":19,"column":9},"action":"remove","lines":[" "]},{"start":{"row":19,"column":8},"end":{"row":19,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":19,"column":9},"end":{"row":19,"column":10},"action":"remove","lines":[" "]},{"start":{"row":19,"column":9},"end":{"row":19,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":10},"end":{"row":20,"column":11},"action":"remove","lines":[" "]},{"start":{"row":20,"column":10},"end":{"row":20,"column":11},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":20,"column":11},"end":{"row":20,"column":12},"action":"remove","lines":[" "]},{"start":{"row":20,"column":11},"end":{"row":20,"column":12},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":8},"end":{"row":21,"column":9},"action":"remove","lines":[" "]},{"start":{"row":21,"column":8},"end":{"row":21,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":21,"column":9},"end":{"row":21,"column":10},"action":"remove","lines":[" "]},{"start":{"row":21,"column":9},"end":{"row":21,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":10},"end":{"row":22,"column":11},"action":"remove","lines":[" "]},{"start":{"row":22,"column":10},"end":{"row":22,"column":11},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":11},"end":{"row":22,"column":12},"action":"remove","lines":[" "]},{"start":{"row":22,"column":11},"end":{"row":22,"column":12},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":4},"end":{"row":23,"column":5},"action":"remove","lines":[" "]},{"start":{"row":23,"column":4},"end":{"row":23,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":5},"end":{"row":23,"column":6},"action":"remove","lines":[" "]},{"start":{"row":23,"column":5},"end":{"row":23,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":53},"end":{"row":15,"column":54},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":54},"end":{"row":15,"column":55},"action":"insert","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":55},"end":{"row":15,"column":56},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":56},"end":{"row":15,"column":57},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":58},"end":{"row":15,"column":59},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":59},"end":{"row":15,"column":60},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":60},"end":{"row":15,"column":61},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":61},"end":{"row":15,"column":62},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":62},"end":{"row":15,"column":63},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":63},"end":{"row":15,"column":64},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":64},"end":{"row":15,"column":65},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":65},"end":{"row":15,"column":66},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":66},"end":{"row":15,"column":67},"action":"insert","lines":["å"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":67},"end":{"row":15,"column":68},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":68},"end":{"row":15,"column":69},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":69},"end":{"row":15,"column":70},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":70},"end":{"row":15,"column":71},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":71},"end":{"row":15,"column":72},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":72},"end":{"row":15,"column":73},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":73},"end":{"row":15,"column":74},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":74},"end":{"row":15,"column":75},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":75},"end":{"row":15,"column":76},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":76},"end":{"row":15,"column":77},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":77},"end":{"row":15,"column":78},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":78},"end":{"row":15,"column":79},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":79},"end":{"row":15,"column":80},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":80},"end":{"row":15,"column":81},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":81},"end":{"row":15,"column":82},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":82},"end":{"row":15,"column":83},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":83},"end":{"row":15,"column":84},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":84},"end":{"row":15,"column":85},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":85},"end":{"row":15,"column":86},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":86},"end":{"row":15,"column":87},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":87},"end":{"row":15,"column":88},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":88},"end":{"row":15,"column":89},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":8},"end":{"row":13,"column":9},"action":"remove","lines":["v"]},{"start":{"row":13,"column":8},"end":{"row":13,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":9},"end":{"row":13,"column":10},"action":"remove","lines":["a"]},{"start":{"row":13,"column":9},"end":{"row":13,"column":10},"action":"insert","lines":["/"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":13,"column":10},"end":{"row":13,"column":10},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1417446697695}