{"changed":true,"filter":false,"title":"NewPhoto.js","tooltip":"/5-pwd/script/NewPhoto.js","value":"\"use strict\";\n//skapa nytt galleri\nfunction NewPhoto(wind){\n    \n    var xhr = new XMLHttpRequest();\n    \n            xhr.onreadystatechange = function(){ //denna kod skall köras när vi får ett svar\n                if(xhr.readyState === 4 && xhr.status === 200){//allt ok\n                    wind.statusX.innerHTML = ' ';//tar bort 'laddar..' när allt hämtas\n                    console.log('Hittades');\n                    var array = JSON.parse(xhr.responseText);\n                    \n                    var arrayWidth = [];\n                    var arrayHeight = [];\n                    var picBox;\n                    \n                    //loop för alla thumbnails width och height\n                    for(var i = 0; i < array.length; i++){\n                       //spara thumb width och height i arrayer\n                        arrayWidth.push(array[i].thumbWidth);\n                        arrayHeight.push(array[i].thumbHeight);\n                    }\n                    //loop för att skapa thumb-bilderna\n                    for(var i = 0; i < array.length; i++){\n                        console.log('i forloop- skapar bilderna');\n                        var pic = document.createElement('img');\n                        pic.setAttribute('src', array[i].thumbURL);\n                        pic.setAttribute('width', array[i].thumbWidth);\n                        pic.setAttribute('height', array[i].thumbHeight);\n                        var picA = document.createElement('a');\n                        picA.setAttribute('href', '#');\n                        picBox = document.createElement('div');\n                        picBox.setAttribute('class', 'picBox');\n                        //skapar tooltip\n                        picA.setAttribute('class', 'tooltip');\n                        picA.setAttribute('title', 'Klicka för att förstora i nytt fönster Högerklicka för att sätta som bakgrund')\n                        \n                        \n                        wind.content.appendChild(picBox);\n                        picBox.appendChild(picA);\n                        picA.appendChild(pic);\n                        \n                        //sätter max height och width för tumnagefrån den sparade arrayn i CSS \n                        //tvungen att skapa ny variabel.\n                        var picBoxWidth = Math.max.apply(Math, arrayWidth)+'px';\n                        var picBoxHeight = Math.max.apply(Math, arrayHeight)+'px';\n                        picBox.style.width = picBoxWidth;\n                        picBox.style.height = picBoxHeight;\n                         \n                        pic.data = array[i]; //sparar arrayn så att jag kan få ut värdena för den stora bilden sen\n                    }\n                    //console.log('zindex: '+wind.clientHeight);\n                    //nytt fönster för stora bilder \n                    wind.content.addEventListener('click', function(e){\n                           var klickedNode = e.target;\n                           if(klickedNode.getAttribute('src') != null){\n                               \n                               var picBig = document.createElement('img');\n                                picBig.setAttribute('src', klickedNode.data.URL);\n                                picBig.setAttribute('width', klickedNode.data.width);\n                                picBig.setAttribute('height', klickedNode.data.height);\n                                \n                            \n                            var picwin = new Window('pics/bigger.png', wind.desktop, 'Förstorngsglas', '#858585', '#5f5f5f', klickedNode.data.width, klickedNode.data.height, 'hidden');//skapa nytt fönster med bilden Skapar fönstret på=(wind.desktop = skrivbordet)\n                            picwin.content.appendChild(picBig);\n                           }\n                    });\n                    \n                    //högerklick = ändra bakgrundsbild   \n                    wind.content.addEventListener('contextmenu', function(e){\n                        e.preventDefault(); \n                        var klickedNodeRight = e.target;\n                         if(klickedNodeRight.getAttribute('src') != null){\n                             document.querySelector('body').style.backgroundImage = 'url('+klickedNodeRight.data.URL+')';\n                             document.querySelector('body').style.backgroundSize = 'auto';\n                         }\n                        console.log('högerklick');\n                    });\n                \n                }else if(xhr.status === 404){\n                        console.log('Hittades ej');\n                }else{\n                    wind.statusX.innerHTML = 'Laddar... ';\n                    var load = document.createElement('img');\n                    load.setAttribute('src', 'pics/load1.gif');\n                    load.setAttribute('width', '20px');\n                    load.setAttribute('height', '20px');\n                    wind.statusX.appendChild(load);\n                    console.log(load);\n                }\n            };\n            \n            xhr.open('GET', 'http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/', true); //asynkromt anrop\n            \n            xhr.send(null);\n            \n            \n    console.log('skapar nytt galleri');\n}","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":51,"column":72},"end":{"row":51,"column":73},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":73},"end":{"row":51,"column":74},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":74},"end":{"row":51,"column":75},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":71},"end":{"row":51,"column":75},"action":"remove","lines":["wind"]},{"start":{"row":51,"column":71},"end":{"row":51,"column":72},"action":"insert","lines":["z"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":72},"end":{"row":51,"column":73},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":73},"end":{"row":51,"column":74},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":74},"end":{"row":51,"column":75},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":75},"end":{"row":51,"column":76},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":76},"end":{"row":51,"column":77},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":77},"end":{"row":51,"column":78},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":71},"end":{"row":51,"column":72},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":48},"end":{"row":51,"column":53},"action":"remove","lines":["style"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":43},"end":{"row":51,"column":47},"action":"remove","lines":["wind"]},{"start":{"row":51,"column":43},"end":{"row":51,"column":44},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":44},"end":{"row":51,"column":45},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":45},"end":{"row":51,"column":46},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":46},"end":{"row":51,"column":47},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":43},"end":{"row":51,"column":44},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":44},"end":{"row":51,"column":45},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":45},"end":{"row":51,"column":46},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":46},"end":{"row":51,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"insert","lines":["-"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"remove","lines":["-"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":54},"end":{"row":51,"column":70},"action":"remove","lines":["getPropertyValue"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":54},"end":{"row":51,"column":56},"action":"remove","lines":["('"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":60},"end":{"row":51,"column":62},"action":"remove","lines":["')"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":48},"end":{"row":51,"column":60},"action":"remove","lines":["style.zIndex"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":47},"end":{"row":51,"column":48},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":48},"end":{"row":51,"column":49},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":49},"end":{"row":51,"column":50},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":50},"end":{"row":51,"column":51},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":51},"end":{"row":51,"column":52},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":52},"end":{"row":51,"column":53},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":53},"end":{"row":51,"column":54},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":54},"end":{"row":51,"column":55},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":55},"end":{"row":51,"column":56},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":54},"end":{"row":51,"column":56},"action":"remove","lines":["he"]},{"start":{"row":51,"column":54},"end":{"row":51,"column":60},"action":"insert","lines":["height"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":54},"end":{"row":51,"column":60},"action":"remove","lines":["height"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":53},"end":{"row":51,"column":54},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":52},"end":{"row":51,"column":53},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":51},"end":{"row":51,"column":52},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":50},"end":{"row":51,"column":51},"action":"remove","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":49},"end":{"row":51,"column":50},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":48},"end":{"row":51,"column":49},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":48},"end":{"row":51,"column":49},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":49},"end":{"row":51,"column":50},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":50},"end":{"row":51,"column":51},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":51},"end":{"row":51,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":52},"end":{"row":51,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":53},"end":{"row":51,"column":54},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":54},"end":{"row":51,"column":55},"action":"insert","lines":["H"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":55},"end":{"row":51,"column":56},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":56},"end":{"row":51,"column":57},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":57},"end":{"row":51,"column":58},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":58},"end":{"row":51,"column":59},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":59},"end":{"row":51,"column":60},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":20},"end":{"row":51,"column":21},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":21},"end":{"row":51,"column":22},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":177},"end":{"row":56,"column":190},"action":"remove","lines":["wind.zIndex()"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":176},"end":{"row":56,"column":177},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":175},"end":{"row":56,"column":176},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":0},"end":{"row":57,"column":0},"action":"remove","lines":["                               var picwin = new Window('pics/bigger.png', wind.desktop, 'Förstorngsglas', '#858585', '#5f5f5f', klickedNode.data.width, klickedNode.data.height, 'hidden');//skapa nytt fönster med bilden Skapar fönstret på=(wind.desktop = skrivbordet)",""]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":63},"end":{"row":63,"column":0},"action":"insert","lines":["",""]},{"start":{"row":63,"column":0},"end":{"row":63,"column":28},"action":"insert","lines":["                            "]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":28},"end":{"row":64,"column":0},"action":"insert","lines":["                               var picwin = new Window('pics/bigger.png', wind.desktop, 'Förstorngsglas', '#858585', '#5f5f5f', klickedNode.data.width, klickedNode.data.height, 'hidden');//skapa nytt fönster med bilden Skapar fönstret på=(wind.desktop = skrivbordet)",""]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":29},"end":{"row":63,"column":59},"action":"remove","lines":["                              "]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":28},"end":{"row":63,"column":29},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":28},"end":{"row":62,"column":63},"action":"remove","lines":["picwin.content.appendChild(picBig);"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":0},"end":{"row":64,"column":35},"action":"insert","lines":["picwin.content.appendChild(picBig);"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":4},"end":{"row":64,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":8},"end":{"row":64,"column":12},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":12},"end":{"row":64,"column":16},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":16},"end":{"row":64,"column":20},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":20},"end":{"row":64,"column":24},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":24},"end":{"row":64,"column":28},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":31},"end":{"row":56,"column":32},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":32},"end":{"row":56,"column":33},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":33},"end":{"row":56,"column":34},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":34},"end":{"row":56,"column":35},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":35},"end":{"row":56,"column":36},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":36},"end":{"row":56,"column":37},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":37},"end":{"row":56,"column":38},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":37},"end":{"row":56,"column":38},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":36},"end":{"row":56,"column":37},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":35},"end":{"row":56,"column":36},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":34},"end":{"row":56,"column":35},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":33},"end":{"row":56,"column":34},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":33},"end":{"row":56,"column":34},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":34},"end":{"row":56,"column":35},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":35},"end":{"row":56,"column":36},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":36},"end":{"row":56,"column":37},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":37},"end":{"row":56,"column":38},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":38},"end":{"row":56,"column":39},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":39},"end":{"row":56,"column":40},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":36},"end":{"row":56,"column":40},"action":"remove","lines":["focu"]},{"start":{"row":56,"column":36},"end":{"row":56,"column":41},"action":"insert","lines":["focus"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":41},"end":{"row":56,"column":43},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":43},"end":{"row":56,"column":44},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":31},"end":{"row":56,"column":44},"action":"remove","lines":["wind.focus();"]}]}]]},"ace":{"folds":[],"scrolltop":360,"scrollleft":0,"selection":{"start":{"row":56,"column":31},"end":{"row":56,"column":31},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":7,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1420905443401}