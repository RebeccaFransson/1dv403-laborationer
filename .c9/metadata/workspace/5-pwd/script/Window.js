{"changed":true,"filter":false,"title":"Window.js","tooltip":"/5-pwd/script/Window.js","value":"\"use strict\";\n\nfunction Window(pic, desk, namn, colorbot, colortop, w, h){\n    //default storlek \n    w = w || \"350\";\n    h = h || \"410\";\n    \n    console.log('w: '+w+' h: '+h);\n    this.desktop = desk;\n    var template = document.querySelector('#temp');//template\n    var windowtemp = template.content.querySelector('.window');//window klassen i template\n    this.w = windowtemp.cloneNode(true);//Kopierar min window-klass från templaten\n     \n    this.content = this.w.querySelector('.content');\n    this.statusX = this.w.querySelector('.statusX');\n    \n    //sätter storlek på nytt fönster\n    this.content.style.width = w+'px';\n    this.content.style.height = h+'px';\n    \n    //skickar med höjden på fönstret till functionen som kommer flytta fönstrerna\n    this.moveWind(h, this.desktop);\n    \n    var topPic = document.createElement('img');\n    topPic.setAttribute('src', pic);\n    topPic.setAttribute('width', '25px');\n    topPic.setAttribute('height', '25px');\n    var topbar = this.w.querySelector('.topbar');\n    topbar.appendChild(topPic);\n    \n    topbar.innerHTML += namn;\n    topbar.setAttribute('style', 'background-color:'+colortop);//sätt färg på  topbar\n    this.w.querySelector('.statusX').setAttribute('style', 'background-color:'+colorbot);\n    desk.content.appendChild(this.w);\n    \n    \n    \n    var self = this;//gör om this så vi kan använda detta this i functionen under(utan att det ska bli this i den funktionen)\n    //stänger fönstret\n    var close = this.w.querySelector('.close');\n    close.onclick = function(){\n        self.close();\n    };\n    \n    this.focus();\n    //on klick på hela fönstret z-index = 99\n    this.w.addEventListener('click', function(e){\n        self.focus();\n        console.log('klick på fönstret');\n    });\n}\n\nWindow.prototype.close = function(){//plockar bort kopian utav templaten\n    this.w.parentNode.removeChild(this.w);\n};\n\nWindow.prototype.moveWind = function(h, desk){\n    //sätter top och left på nästa nya window\n    var top = Window.globalTop + 29;\n    var left = Window.globalLeft + 29;\n    \n    console.log('maxhöjd: '+ +'top '+top+' h: '+h)\n    //kolla utanför top+höjd större än desktop.content.clientHeight\n    if((top+h)>(this.desktop.content.clientHeight-this.desktop.meny.clientHeight)){\n        //utanför sätt globalTop som 0\n        Window.globalTop = 0;\n        console.log('utanfööör')\n    }else{\n    console.log('top: '+top+' left: '+left);\n    Window.globalTop = top;\n    Window.globalLeft = left;\n    }\n    \n    this.w.style.top = top+'px';\n    this.w.style.left = left+'px';\n    \n    //sätter globala variablem som top och left\n    \n};\n\n// global variabel med top och left\nWindow.globalTop = 0;\nWindow.globalLeft = 0;\nWindow.globalIndex = 0;\n\nWindow.prototype.focus = function(){\n    //on klick på hela fönstret z-index = 99\n    var indexCount = 1 + Window.globalIndex;\n    this.w.style.zIndex = indexCount;\n    \n    Window.globalIndex = indexCount;\n};\n//http://tech.pro/tutorial/650/javascript-draggable-elements   DRAGEBLE ELEMENTS","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":64,"column":8},"end":{"row":64,"column":9},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":9},"end":{"row":64,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":31},"end":{"row":65,"column":0},"action":"insert","lines":["",""]},{"start":{"row":65,"column":0},"end":{"row":65,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":8},"end":{"row":65,"column":9},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":9},"end":{"row":65,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":10},"end":{"row":65,"column":11},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":8},"end":{"row":65,"column":11},"action":"remove","lines":["con"]},{"start":{"row":65,"column":8},"end":{"row":65,"column":15},"action":"insert","lines":["console"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":15},"end":{"row":65,"column":16},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":16},"end":{"row":65,"column":17},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":17},"end":{"row":65,"column":18},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":16},"end":{"row":65,"column":18},"action":"remove","lines":["lo"]},{"start":{"row":65,"column":16},"end":{"row":65,"column":21},"action":"insert","lines":["log()"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":20},"end":{"row":65,"column":22},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":21},"end":{"row":65,"column":22},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":22},"end":{"row":65,"column":23},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":23},"end":{"row":65,"column":24},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":24},"end":{"row":65,"column":25},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":25},"end":{"row":65,"column":26},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":26},"end":{"row":65,"column":27},"action":"insert","lines":["ö"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":27},"end":{"row":65,"column":28},"action":"insert","lines":["ö"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":28},"end":{"row":65,"column":29},"action":"insert","lines":["ö"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":29},"end":{"row":65,"column":30},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":60,"column":4},"end":{"row":61,"column":0},"action":"insert","lines":["",""]},{"start":{"row":61,"column":0},"end":{"row":61,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":4},"end":{"row":61,"column":5},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":5},"end":{"row":61,"column":6},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":6},"end":{"row":61,"column":7},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":7},"end":{"row":61,"column":8},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":8},"end":{"row":61,"column":9},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":9},"end":{"row":61,"column":10},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":10},"end":{"row":61,"column":11},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":11},"end":{"row":61,"column":12},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":12},"end":{"row":61,"column":13},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":12},"end":{"row":61,"column":13},"action":"remove","lines":["l"]},{"start":{"row":61,"column":12},"end":{"row":61,"column":17},"action":"insert","lines":["log()"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":16},"end":{"row":61,"column":18},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":17},"end":{"row":61,"column":18},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":18},"end":{"row":61,"column":19},"action":"insert","lines":["ö"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":19},"end":{"row":61,"column":20},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":19},"end":{"row":61,"column":20},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":18},"end":{"row":61,"column":19},"action":"remove","lines":["ö"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":17},"end":{"row":61,"column":18},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":17},"end":{"row":61,"column":18},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":18},"end":{"row":61,"column":19},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":19},"end":{"row":61,"column":20},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":19},"end":{"row":61,"column":20},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":19},"end":{"row":61,"column":20},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":20},"end":{"row":61,"column":21},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":21},"end":{"row":61,"column":22},"action":"insert","lines":["ö"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":22},"end":{"row":61,"column":23},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":23},"end":{"row":61,"column":24},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":23},"end":{"row":61,"column":24},"action":"remove","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":23},"end":{"row":61,"column":24},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":24},"end":{"row":61,"column":25},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":25},"end":{"row":61,"column":26},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":27},"end":{"row":61,"column":28},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":28},"end":{"row":61,"column":30},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":29},"end":{"row":61,"column":30},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":30},"end":{"row":61,"column":31},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":31},"end":{"row":61,"column":32},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":32},"end":{"row":61,"column":33},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":33},"end":{"row":61,"column":34},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":9},"end":{"row":65,"column":10},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":8},"end":{"row":65,"column":9},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":35},"end":{"row":61,"column":36},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":36},"end":{"row":61,"column":38},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":37},"end":{"row":61,"column":38},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":38},"end":{"row":61,"column":39},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":39},"end":{"row":61,"column":40},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":40},"end":{"row":61,"column":41},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":42},"end":{"row":61,"column":43},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":43},"end":{"row":61,"column":44},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":44},"end":{"row":61,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":45},"end":{"row":61,"column":46},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":46},"end":{"row":61,"column":47},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":47},"end":{"row":61,"column":49},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":48},"end":{"row":61,"column":49},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":49},"end":{"row":61,"column":50},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":50},"end":{"row":61,"column":51},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":51},"end":{"row":61,"column":52},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":51},"end":{"row":61,"column":52},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":50},"end":{"row":61,"column":51},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":50},"end":{"row":61,"column":51},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":51},"end":{"row":61,"column":52},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":53},"end":{"row":61,"column":54},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":54},"end":{"row":61,"column":55},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":35},"end":{"row":61,"column":36},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":35},"end":{"row":61,"column":36},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":43},"end":{"row":61,"column":44},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":43},"end":{"row":61,"column":44},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":28},"end":{"row":61,"column":29},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":29},"end":{"row":61,"column":30},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":30},"end":{"row":61,"column":31},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":31},"end":{"row":61,"column":32},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":32},"end":{"row":61,"column":33},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":33},"end":{"row":61,"column":34},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":34},"end":{"row":61,"column":35},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":35},"end":{"row":61,"column":36},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":36},"end":{"row":61,"column":37},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":36},"end":{"row":61,"column":37},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":28},"end":{"row":61,"column":29},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":34},"end":{"row":61,"column":35},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":34},"end":{"row":61,"column":35},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":61,"column":29},"end":{"row":61,"column":44},"action":"remove","lines":["parseInt(top+h)"]}]}]]},"ace":{"folds":[],"scrolltop":540,"scrollleft":0,"selection":{"start":{"row":61,"column":29},"end":{"row":61,"column":29},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":37,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1420816653977}